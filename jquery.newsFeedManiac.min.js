(function(d){var f="activateManiac",b={id:"|id|",size:"|count|"},e={count:10,headingLength:51,textLength:160,showShortDescription:true,showThumbnail:true};function c(h,g){this.element=h;this.$elem=d(this.element);this.options=d.extend({},e,g);this.init()}c.prototype={init:function(){var g=this.$elem,h=this.options,j=[],i=[];g.css("list-style","none");d.each(h.channels,function(){var l=this;l.collect=function(n){i.push(n)};var m=a.dataLoaders[l.type],k=m.url;k=k.replace(b.id,encodeURIComponent(l.id));k=k.replace(b.size,h.count);j.push(a.doRequest(l,k,m,h))});d.when.apply(d,j).always(function(){d.each(i,function(){g.append(a.buildHtml(this,h))})})}};var a={doRequest:function(j,i,g,h){return d.ajax({url:i,type:"GET",dataType:g.dataType,success:function(k){a[g.parseMethod](j,k,h)},error:function(k){console.log(k)}})},parseRss:function(i,j,h){var g=j.responseData.feed;d.each(g.entries,function(){var o=this,r=a.shorten(a.stripHtml(o.title),h.headingLength),n=a.shorten(a.stripHtml(o.content),h.textLength),m=d(o.content).find("img:lt(1)").attr("src"),k=d(o.content).find("img:lt(1)").parent().attr("href")||o.link||d(o.content).find("a:lt(1)").attr("href"),l=o.contentSnippet,q="#",p=o.publishedDate;i.collect(a.buildItemObj(i.type,r,n,m,k,l,q,p))})},buildItemObj:function(h,n,k,j,g,i,m,l){return{type:h,heading:n,content:k,image:{src:(j?j:"http://placehold.it/80x80&amp;text=[no image]"),href:g,alt:i},link:{href:m,alt:i},pubDate:l}},buildHtml:function(i,h){var g=d('<li class="row"></li>'),k=d('<div class="small-3 large-2 columns"><a href="'+i.image.href+'" target="_blank" class="th radius"><img src="'+i.image.src+'" alt="'+i.image.alt+'" width="100%"/></a></div>'),j=d('<div class="'+(h.showThumbnail?"small-9 large-10":"small-12 large-12")+' columns"><p class="lead"><a href="'+i.image.href+'" target="_blank">'+i.heading+"</a></p>"+(h.showShortDescription?"<p>"+i.content+"</p>":"")+"</div>");if(h.showThumbnail){g.append(k)}g.append(j);return g},fixCase:function(g){if(g===null){return null}return g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()},shorten:function(g,h){if(typeof g==="undefined"||g===null){return null}if(g.length>h){return g.substring(0,Math.max(0,h-3))+"..."}else{return g}},stripHtml:function(g){if(typeof g==="undefined"||g===null){return null}return g.replace(/(<([^>]+)>)|nbsp;|\s{2,}|/ig,"")},dataLoaders:{rss:{url:"https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+b.size+"&q="+b.id,heading:"RSS",dataType:"jsonp",parseMethod:"parseRss"}}};d.fn[f]=function(g){return this.each(function(){if(!d.data(this,"plugin_"+f)){d.data(this,"plugin_"+f,new c(this,g))}})}})(jQuery);